{% extends 'base.html' %}
{% block title %}My Events{% endblock %}
{% block header_class %}bg-gradient-to-r from-pink-400 to-red-400 text-white p-4{% endblock %}
{% block header_content %}
    <h1 class="text-2xl font-bold flex items-center gap-2">
        🎁 Your Events
    </h1>
{% endblock %}
{% block content %}
    <div class="max-w-3xl mx-auto mt-6">
        <div class="flex justify-between items-center mb-4">
            <h2 class="text-xl font-semibold">My Events</h2>
            <div class="flex items-center gap-4">
                <select id="sort-events" class="border rounded-lg p-2" onchange="window.location.href=this.value">
                    <option value="">Sort By</option>
                    <option value="{% url 'event_list' %}?sort=name">Name</option>
                    <option value="{% url 'event_list' %}?sort=date">Date</option>
                </select>
                <a href="{% url 'event_create' %}" class="bg-green-500 text-white px-4 py-2 rounded-lg hover:bg-green-600 transition shadow-md">+ Add New Event</a>
            </div>
        </div>
        {% if events %}
            <ul class="space-y-4">
                {% for event in events %}
                    <li class="bg-white p-4 rounded-lg shadow-md hover:shadow-lg transition">
                        <div class="flex justify-between items-center">
                            <div>
                                <strong class="text-lg">{{ event.name }}</strong>
                                <p class="text-gray-600">{{ event.date }} ({{ event.get_event_type_display }})</p>
                                <p class="text-gray-500 text-sm">Remind {{ event.remind_days_before }} day{{ event.remind_days_before|pluralize }} before</p>
                                <p class="text-gray-500 text-sm">{{ event.message|truncatechars:50|default:"No message" }}</p>
                            </div>
                            <div class="flex space-x-2">
                                <a href="{% url 'event_update' event.pk %}" class="bg-gray-500 text-white px-3 py-1 rounded hover:bg-gray-600 transition">Edit</a>
                                <a href="{% url 'event_delete' event.pk %}" class="bg-red-500 text-white px-3 py-1 rounded hover:bg-red-600 transition" onclick="return confirm('Are you sure you want to delete {{ event.name }}?')">Delete</a>
                            </div>
                        </div>
                    </li>
                {% endfor %}
            </ul>
        {% else %}
            <p class="text-gray-600 bg-white p-4 rounded-lg shadow-md">No events yet. Start by adding one!</p>
        {% endif %}
    </div>
{% endblock %}