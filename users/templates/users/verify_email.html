{% extends "base.html" %}
{% load static %}
{% block content %}
<h2>Verify Your Email</h2>

<form method="POST">
    {% csrf_token %}
    <label for="code">Enter Verification Code:</label>
    <input type="text" name="code" id="code" maxlength="6" required autofocus>
    <button type="submit">Verify</button>
</form>

<br>

<form method="POST" action="{% url 'resend_verification_code' %}">
    {% csrf_token %}
    <button type="submit" id="resendButton" disabled>Resend Code (30s)</button>
</form>
{% if messages %}
  {% for message in messages %}
    <div class="alert alert-{{ message.tags }}">{{ message }}</div>
  {% endfor %}
{% endif %}
<script>
    let countdown = 30;  // 30 seconds timer
    const resendButton = document.getElementById('resendButton');

    const timer = setInterval(() => {
        if (countdown > 0) {
            resendButton.textContent = `Resend Code (${countdown}s)`;
            countdown--;
        } else {
            resendButton.textContent = "Resend Code";
            resendButton.disabled = false;
            clearInterval(timer);
        }
    }, 1000);
</script>

{% endblock %}
